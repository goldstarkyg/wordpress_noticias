!function(t){"use strict";var a=t("body");if(a.on("click",".js-post-point .point-btn",function(a){a.preventDefault();var o=t(this),i=o.data("action"),n=o.closest(".js-post-point").data("post_id"),s=t(".js-post-point[data-post_id="+n+"]"),e=s.siblings(".mobile-info");o=s.find(".point-btn[data-action="+i+"]"),n&&(o.attr("disabled","disabled"),s.find(".count").addClass("loading"),o.hasClass("active")?(o.removeClass("active"),t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_point_discard",sub_action:i,id:n},function(a){var i=t.parseJSON(a);1==i.status&&(s.find(".count .text").text(i.point_count),e.find(".mobile-votes-count").text(i.point_count)),s.find(".count").removeClass("loading"),o.removeAttr("disabled")})):(s.find(".active").removeClass("active"),o.addClass("active"),t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_point",sub_action:i,id:n},function(a){var i=t.parseJSON(a);1==i.status&&(s.find(".count .text").text(i.point_count),e.find(".mobile-votes-count").text(i.point_count)),s.find(".count").removeClass("loading"),o.removeAttr("disabled")})))}),a.on("click",".js-reaction-item .reaction-vote-btn",function(a){a.preventDefault();var o="disabled",i=t(this);if(!i.hasClass(o)){i.addClass(o),i.parent().addClass("voted");var n=i.closest(".reaction-item").data("reaction_id"),s=i.closest(".reaction-sections"),e=s.data("post_id");e&&n&&t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_reaction_add",post_id:e,reaction_id:n},function(a){i.removeClass(o);var n=t.parseJSON(a);1==n.status&&s.find(".reaction-item").each(function(){var a=t(this).data("reaction_id"),i=n.reaction_total[a];i&&(t(this).find(".reaction-stat").height(i.height+"%"),t(this).find(".reaction-stat-count").text(i.total));var s=n.reaction_restrictions[a];s&&!1===s.can_react&&t(this).find(".reaction-vote-btn").addClass(o)})})}}),parseInt(boombox_ajax_params.track_view)){var o=t("article.single").data("post-id");o&&t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_track_view",post_id:o},function(t){})}}(jQuery);